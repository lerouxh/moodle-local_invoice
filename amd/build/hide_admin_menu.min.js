define('local_invoice/hide_admin_menu', ['exports'], function(exports) {
    'use strict';

    Object.defineProperty(exports, '__esModule', { value: true });

    const textIncludes = (el, needle) => {
        if (!el) {
            return false;
        }

        const t = String(el.textContent || '').trim().toLowerCase();
        return t.includes(String(needle).toLowerCase());
    };

    const hideInvoicesAdminsMenu = () => {
        const needleHref = '/admin/settings.php?section=local_invoice_settings';
        const links = document.querySelectorAll(`a[href*="${needleHref}"]`);

        links.forEach((a) => {
            const li = a.closest('li');
            if (li && textIncludes(li, 'Invoices (admins)')) {
                li.style.display = 'none';
                return;
            }

            // Fallback: hide just the link.
            a.style.display = 'none';
        });
    };

    const init = () => {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', hideInvoicesAdminsMenu);
        } else {
            hideInvoicesAdminsMenu();
        }
    };

    exports.init = init;
});
